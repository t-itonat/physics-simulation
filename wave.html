<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>波のシミュレーション</title>

  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f8fafc;
      font-family: sans-serif;
    }
    #graph {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>

<body>

  <div id="graph"></div>

  <script>
    // 波のパラメータ
    const A = 1;        // 振幅
    const k = 2 * Math.PI / 5; // 波数
    const omega = 0.2;  // 角周波数

    // x軸
    const x = [];
    for (let i = 0; i <= 200; i++) {
      x.push(i / 10);
    }

    // フレーム生成
    const frames = [];
    for (let t = 0; t < 200; t++) {
      const y = x.map(xi => A * Math.sin(k * xi - omega * t));
      frames.push({
        name: t.toString(),
        data: [{ x: x, y: y }]
      });
    }

    // 初期波形
    const y0 = x.map(xi => A * Math.sin(k * xi));

    const data = [{
      x: x,
      y: y0,
      mode: "lines",
      line: { color: "royalblue", width: 3 }
    }];

    const layout = {
      title: "波の伝搬シミュレーション",
      xaxis: { range: [0, 20], title: "x" },
      yaxis: { range: [-1.5, 1.5], title: "y" },
      margin: { t: 50, l: 50, r: 20, b: 50 },
      updatemenus: [{
        type: "buttons",
        showactive: false,
        buttons: [{
          label: "▶ 再生",
          method: "animate",
          args: [null, { frame: { duration: 30, redraw: false }, fromcurrent: true }]
        }]
      }]
    };

   Plotly.newPlot("graph", data, layout, {
  displaylogo: false,
  modeBarButtonsToRemove: ["toImage"]
}).then(() => {
  Plotly.addFrames("graph", frames);
});
  </script>

</body>
</html>
